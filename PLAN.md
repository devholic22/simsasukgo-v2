# 심사숙고(Simsasukgo) 기획 문서 작성 및 제품 스펙 고정 계획

## 요약
- 목적: 여행 중 등록한 장소/가게의 **영업 상태와 거리 기반 맥락**을 함께 보며, 일정 기간 내 **최적 이동 플랜**을 수립하는 서비스 정의.
- 산출물: `/Users/devholic/Desktop/Simsasukgo/PLAN.md` 신규 생성.
- 문서 수준: 사용자가 선택한 **기획 중심** 문서.
- 1차 타깃: **모바일 웹 PWA**.
- 핵심 연동: **Google Maps 기반 검색/지도/거리 계산/영업정보 동기화**.
- 현재 워크스페이스 상태: 파일 없음(완전 신규 작성 전제).

## PLAN.md 구성(결정 완료)
`PLAN.md`는 아래 목차와 내용으로 작성한다.

1. 서비스 개요
- 서비스명: 심사숙고
- 카테고리: 여행
- 핵심 주제: 정해진 일정 동안 최적의 이동 플랜 계획
- 기획 배경: 해외에서 Google Maps 사용 시 영업 상태 확인의 비효율(개별 클릭 필요) 해소
- 문제 정의/해결 가치:
  - 영업 중 여부 확인 시간을 단축
  - 방문 후보의 우선순위와 이동 동선을 동시에 관리

2. 핵심 사용자 시나리오
- 여행자가 가고 싶은 장소를 검색해 저장
- 현재 위치 기준 반경 레이어(100/200/300/500/1000m)로 근접 후보 파악
- 오픈 상태 동기화(자동 + 수동 버튼)
- 방문 체크 후 표시 정책(회색/숨김) 선택
- 일정 내 최적 경로 추천 확인

3. 기능 요구사항(핵심)
- 장소 등록:
  - Google Maps 검색 결과에서 음식점/장소/숙소로 분류 등록
  - 사용자 메모: 대표 메뉴, 특징 태그(예: 야키니쿠)
- 지도/위치:
  - 기본 지도 중심은 현재 위치
  - 실시간 추적 가능 시 자동 반영, 미지원/거부 시 `내 위치로 이동` 버튼으로 수동 갱신
  - 반경 원 토글: 100m, 200m, 300m, 500m, 1000m
- 방문 상태:
  - 방문 완료 체크 가능
  - 기본 정책: 설정에서 회색 표시/숨김 선택 가능
- 영업 상태:
  - 자동 동기화 + 수동 `오픈 여부 동기화` 버튼 제공
  - 상태: 영업 중/영업 종료/정보 없음
- 일정/플랜:
  - 사용자 여행 기간(시작~종료) 기준 후보 정렬
  - 1순위 최적화 기준: 이동시간 최소화
- 데이터 관리:
  - JSON 내보내기/가져오기
  - 통계 카드(총 마커, 카테고리별 수, 방문/미방문 수)
  - 전체 삭제 등 위험 작업 분리 UI

4. 정보 구조(IA) 및 화면 설계 재정의
- 탭 구조:
  - 지도 보기
  - 마커 관리
  - 설정
- 지도 보기:
  - 지도 + 반경 버튼 그룹 + 내 위치 이동 + 오픈 동기화
  - 방문 상태 시각 구분(컬러/회색/숨김)
- 마커 관리:
  - 검색 입력, 결과 리스트, 카테고리별 등록 버튼
  - 저장 항목 카드(거리/영업 상태/메모/방문 토글/삭제)
- 설정:
  - 통계, 백업/복원, 표시 정책, 동기화 주기, 위험 작업

5. UX 원칙(재설계 기준)
- 핵심 행동 3회 탭 이내:
  - 검색 후 등록
  - 현재 위치 갱신
  - 오픈 상태 동기화
- 지도 우선 정보 밀도:
  - 거리 + 영업 상태 + 방문 상태를 동시에 인지 가능하게
- 상태 일관성:
  - 동기화 시각(last synced at) 명시
  - API 실패 시 사용자 재시도 경로 명확화
- 모바일 우선:
  - 하단 고정 내비, 한 손 조작 우선 버튼 배치

6. 데이터 모델(기획 레벨)
- Trip
  - id, title, startDate, endDate, baseLocation(optional)
- Place
  - id, googlePlaceId, name, address, lat, lng
  - category(food/place/stay)
  - memoMenu, tags[]
  - distanceFromCurrent(optional)
  - openStatus(open/closed/unknown), openStatusUpdatedAt
  - visited(boolean), visitedAt(optional)
  - rating(optional)
- UserPreference
  - visitedDisplayMode(gray|hidden)
  - radiusPreset([100,200,300,500,1000] 중 활성값)
  - autoSyncEnabled, autoSyncIntervalMin
- SyncLog(optional 기획 항목)
  - syncedAt, successCount, failedCount, errorSummary

7. 외부 연동/인터페이스(공개 계약 수준)
- Google Maps Places 검색 인터페이스
  - 입력: query, location(optional), radius(optional)
  - 출력: placeId, name, address, location, rating, openingHoursSummary
- 영업 상태 동기화 인터페이스
  - 입력: 저장된 placeId 목록
  - 출력: placeId별 openStatus/openNow/nextCloseTime(optional)
- 경로 최적화 인터페이스(기획)
  - 입력: 현재위치, 후보 장소 목록, 시간창
  - 출력: 이동시간 최소화 기준 방문 순서
- JSON 백업 포맷 버전 필드 포함
  - schemaVersion, exportedAt, trip, places, preferences

8. 상태/예외 정책
- 위치 권한 거부:
  - 수동 위치 갱신 CTA 노출
- 영업정보 미제공 장소:
  - `정보 없음`으로 표기, 필터 제외 옵션 제공
- 네트워크 실패:
  - 마지막 동기화 시각 유지 + 재시도 버튼
- 중복 등록:
  - 동일 googlePlaceId 등록 시 기존 항목으로 포커스 이동

9. MVP 범위와 제외 범위
- MVP 포함:
  - 검색/등록, 지도 표시, 반경 토글, 방문 체크, 영업 동기화, 기본 일정 플랜 제안, 백업/복원
- MVP 제외:
  - 다중 사용자 협업
  - 소셜 공유
  - 고급 AI 개인화 추천
  - 오프라인 완전 동작 보장

10. 수용 기준(Acceptance Criteria)
- 사용자가 1개 이상 장소를 검색 후 카테고리 등록 가능
- 지도에서 현재 위치 기준 반경 원 전환 가능
- 방문 체크 후 회색/숨김 정책이 즉시 반영
- 오픈 상태 자동 동기화 + 수동 버튼 동작
- 일정 기간 내 추천 순서가 이동시간 최소화 기준으로 생성
- JSON 백업 후 복원 시 주요 데이터 무손실

11. 테스트 시나리오(기획 검증)
- 기능:
  - 장소 등록/수정/삭제
  - 카테고리 분류 정확성
  - 방문 상태 전환
- 지도:
  - 반경 전환 시 렌더 정확성
  - 현재 위치 갱신 실패/성공
- 동기화:
  - 정상 응답/부분 실패/전면 실패
  - 수동 동기화 연타 방지
- UX:
  - 초행 사용자 기준 주요 과업 완료 시간
  - 하단 탭 및 핵심 버튼 접근성
- 데이터:
  - 백업/복원 round-trip 검증
  - schemaVersion 호환성 경고

12. 단계별 실행 로드맵(문서 내 포함)
- Phase 1: 요구사항/화면 IA 확정
- Phase 2: 지도/검색/등록 핵심 플로우 구현
- Phase 3: 영업 동기화/방문 정책/반경 UX 완성
- Phase 4: 일정 최적화 + 백업/복원 + 안정화
- Phase 5: 베타 피드백 반영 및 정식 배포 준비

## 공용 API/인터페이스/타입 변경 사항(명시)
- 신규 정의(기획 단계):
  - `Place`, `Trip`, `UserPreference`, `SyncLog` 타입
  - `SearchPlaces`, `SyncOpenStatus`, `GetOptimizedRoute` 인터페이스
  - 백업 JSON 포맷 `schemaVersion` 필드 의무화
- 기존 시스템과 충돌 없음(현재 레포 비어 있음).

## 가정 및 기본값
- 플랫폼: 모바일 웹 PWA 고정.
- 문서 성격: 구현 코드가 아닌 기획 중심.
- 방문 표시 정책: 사용자 설정에서 `회색/숨김` 선택 가능(초기 기본값은 회색 권장으로 문서에 명시).
- 영업 동기화: 자동+수동 병행.
- 최적화 1순위: 이동시간 최소화.
- 지도/검색 데이터 원천: Google Maps 계열 API.
